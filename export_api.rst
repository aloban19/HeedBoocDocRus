=======
API для экспорта данных
=======

Для менеджеров доступен специально разработанный API, 
позволяющий экспортировать собранные данные для собственных нужд в формате JSON

Авторизация
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Чтобы совершать запросы к API, необходимо получить токен.

+--------+----------------------------------------------------+
|POST    | https://identity.heedbook.com/account/generatetoken|
+--------+----------------------------------------------------+
|username| адрес электронной почты пользователя      |
+--------+----------------------------------------------------+
|pswd    | пароль                                    |
+--------+----------------------------------------------------+


Если авторизация пройдет успешно, пользователю будет доступен собственный уникальный идентификатор и подписанный JWT токен. 
Эти данные будут необходимы для непосредственного экспорта данных.

Экспорт
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Получив сгенерированный токен, пользователь может выгрузить данные:

+-------------+--------------------------------------------------------------------------------+
|GET/POST     | http://identity.heedbook.com/api/CompanySessions/ |
+-------------+--------------------------------------------------------------------------------+
|Authorization| JWT токен                                                                      |
+-------------+--------------------------------------------------------------------------------+

Пользователю доступны опциональные параметры экспорта, вписываемые в строку запроса:

Query-параметры:
 * begTime: необязателен. - время начала сессии в формате "yyyyMMdd".
 * endTime: необязателен. - время окончания сессии в формате "yyyyMMdd".
 * officeId - необязателен. -  массив названий АЗС.

Получение сессий – По всем заправкам за время указанное в параметрах, 
либо если в параметрах не указано, то за последние семь дней
 
 
.. code-block:: JSON

 [
    {
        "sessionId": "b140448e-8440-4305-e0d3-08d60449ab68",
        "userId": "7f46106c-e014-444d-9982-65cd3f502d71",
        "firstName": "Иван",
        "lastName": "Иванов",
        "middleName": "Иванович",
        "begOffice": "Офис 1",
        "endOffice": "Офис 1",
        "begTime": "2018-08-17T13:59:37.4309366",
        "endTime": "2018-08-17T14:01:06.5408691"
    },
    {
        "sessionId": "140dde79-785c-4383-e0d4-08d60449ab68",
        "userId": "7f46106c-e014-444d-9982-65cd3f502d71",
        "firstName": "Иван",
        "lastName": "Иванов",
        "middleName": "Иванович",
        "begOffice": "Офис 1",
        "endOffice": "Офис 1",
        "begTime": "2018-08-17T14:23:44.3180886",
        "endTime": "2018-08-17T14:24:13.04697"
    }
 ]


1) "lastName": Фамилия

2) "firstName": Имя

3) "middleName": Отчество

4) "userId": ID сотрудника

5) "begTime": Дата и время начала смены

6) "endTime": Дата и время окончания смены

7) "begOffice": Офис, где произошла идентификация начала смены

8) "endOffice": Офис, где произошла идентификация окончания смены

9) "sessionId": Id сессии
